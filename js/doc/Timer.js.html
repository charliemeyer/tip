<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Timer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Timer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define([
        "dojo/_base/declare",
        "dijit/_WidgetBase",
        "dijit/_TemplatedMixin",
        "dojo/text!js/templates/timer.html",
        "dojo/_base/fx",
        "dojo/query",
        "dojo/dom-construct"
    ], function (
        declare,
        _WidgetBase,
        _TemplatedMixin,
        timerTemplateString,
        fx,
        query,
        domConstruct
    ) {


    /**
     *  The Timer class manages a timer widget on the page.  It counts down
     *  from a starting value until it hits zero or is paused.
     *  @class
     *  @name  Timer
     *  @extends dijit._WidgetBase
     */
    var Timer = declare([_WidgetBase, _TemplatedMixin], {
        templateString: timerTemplateString,

        /**
         *  @constructor
         *  @function
         *  @memberof Timer.prototype
         *  @param {Object} args
         *  @param {number} args.minutes The number of minutes the timer should
         *      start at.
         */
        constructor: function (args) {
            args = args || {};
            /**
             *  Whether the timer is paused or running.
             *  @name paused
             *  @type {boolean}
             *  @memberof Timer.prototype
             */
            this.paused = false;
            /**
             *  The number of seconds left on the timer.
             *  @name  seconds
             *  @type {number}
             *  @memberof Timer.prototype
             */
            this.seconds = Math.round((args.minutes || 1) * 60);
        },

        /**
         *  Starts running the timer.
         *  @memberof Timer.prototype
         *  @param  {function} callback Will be called when the timer stops
         *      running.  Will be passed a boolean: true if the timer was
         *      simply paused, false if it ran out of time.
         */
        runTimer: function(callback) {
            var self = this;
            setTimeout(function decrement() {
                self.seconds -= 1;
                if (!self.paused &amp;&amp; self.seconds >= 0) {
                    setTimeout(decrement, 1000);
                } else {
                    callback(self.paused);
                    return;
                }
                self.renderTime();
            }, 1000);
        },

        /**
         *  Pauses the timer, freezing the display at its current value.
         *  @memberof Timer.prototype
         */
        stopTimer: function() {
            this.paused = true;
        },

        /**
         *  Displays the current value of the timer on the domNode, in
         *  M:SS format.
         *  @memberof Timer.prototype
         */
        renderTime: function() {
            this.timeArea.innerHTML = this._formatTime(this.seconds);
        },

        /**
         *  Produces a string from the given number of seconds in the format
         *  D:HH:MM:SS.  Leading fields are omitted unless they are nonzero.
         *  The minutes field is always supplied, even if zero.
         *  All fields except the first are made into two-digit fields by
         *  adding a leading zero, if needed.
         *  @private
         *  @memberOf Timer.prototype
         *  @param  {number} seconds
         *  @return {string}
         */
        _formatTime: function (seconds) {
            var str = "";
            function stringify(num) {
                return ((str != "" &amp;&amp; num &lt; 10) ? "0" : "") + num.toString();
            }
            var minutes = Math.floor(seconds / 60);
            var hours = Math.floor(minutes / 60);
            var days = Math.floor(hours / 24);
            seconds %= 60;
            minutes %= 60;
            hours %= 24;

            if (days > 0) {
                str += stringify(days) + ":";
            }
            if (hours > 0) {
                str += stringify(hours) + ":";
            }
            str += stringify(minutes) + ":";
            return str + stringify(seconds);
        }
    });

    return Timer;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ChatBox.html">ChatBox</a></li><li><a href="Editor.html">Editor</a></li><li><a href="Endscreen.html">Endscreen</a></li><li><a href="EventQueue.html">EventQueue</a></li><li><a href="InfoBar.html">InfoBar</a></li><li><a href="Interviewer.html">Interviewer</a></li><li><a href="Phrase.html">Phrase</a></li><li><a href="Timer.html">Timer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Wed Nov 04 2015 09:45:47 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
