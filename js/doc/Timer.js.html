<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Timer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Timer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define([
        "dojo/_base/declare",
        "dijit/_WidgetBase",
        "dojo/_base/fx",
        "dojo/query",
        "dojo/dom-construct"
    ], function (
        declare,
        _WidgetBase,
        fx,
        query,
        domConstruct
    ) {


    /**
     *  The Timer class manages a timer widget on the page.  It counts down
     *  from a starting value until it hits zero or is paused.
     *  @class
     *  @name  Timer
     *  @extends dijit._WidgetBase
     */
    var Timer = declare([_WidgetBase], {
        /**
         *  @constructor
         *  @function
         *  @memberof Timer.prototype
         *  @param {Object} args
         *  @param {string} [args.id="timer"] The id of the HTML element to
         *      transform into the timer.
         *  @param {number} args.minutes The number of minutes the timer should
         *      start at.
         *  @todo Instead of turning the div into this thing's domNode, the
         *      more typical way is to create a completely new domNode and
         *      get passed the parent element.
         */
        constructor: function (args) {
            args = args || {};
            var id = args.id || "timer";
            if (id[0] !== "#") {
                id = "#" + id;
            }
            /**
             *  Whether the timer is paused or running.
             *  @name paused
             *  @type {boolean}
             *  @memberof Timer.prototype
             */
            this.paused = false;
            /**
             *  The node controlled by the timer.
             *  @name  domNode
             *  @type {domNode}
             *  @memberof Timer.prototype
             */
            this.domNode = query(id)[0];
            this.domNode.innerHTML = "";
            /**
             *  The number of seconds left on the timer.
             *  @name  seconds
             *  @type {number}
             *  @memberof Timer.prototype
             */
            this.seconds = Math.round(args.minutes * 60 || 1 * 60);
        },

        /**
         *  Starts running the timer.
         *  @memberof Timer.prototype
         *  @param  {function} callback Will be called when the timer stops
         *      running.  Will be passed a boolean: true if the timer was
         *      simply paused, false if it ran out of time.
         */
        runTimer: function(callback) {
            var self = this;
            setTimeout(function decrement() {
                self.seconds -= 1;
                if (!self.paused &amp;&amp; self.seconds >= 0) {
                    setTimeout(decrement, 1000);
                } else {
                    callback(self.paused);
                    return;
                }
                self.renderTime();
            }, 1000);
        },

        /**
         *  Pauses the timer, freezing the display at its current value.
         *  @memberof Timer.prototype
         */
        stopTimer: function() {
            this.paused = true;
        },

        /**
         *  Displays the current value of the timer on the domNode, in
         *  M:SS format.
         *  @memberof Timer.prototype
         */
        renderTime: function() {
            minutes = Math.floor(this.seconds / 60);
            seconds = this.seconds % 60;
            if (seconds &lt; 10) {
                secondsstr = "0" + seconds.toString();
            } else {
                secondsstr = seconds.toString();
            }
            this.domNode.innerHTML = minutes.toString() + ":" + secondsstr;
        }
    });

    return Timer;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ChatBox.html">ChatBox</a></li><li><a href="Editor.html">Editor</a></li><li><a href="Endscreen.html">Endscreen</a></li><li><a href="Interviewer.html">Interviewer</a></li><li><a href="Timer.html">Timer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Sat Oct 31 2015 12:00:35 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
