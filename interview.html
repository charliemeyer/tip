<!DOCTYPE html>
<html>
<head>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css">
    <script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <title>tip -- practice interviews</title>
    <script type="text/javascript">
    var dojoConfig = {
        baseUrl: "./",
        tlmSiblingOfDojo: false
    };
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"
            data-dojo-config="async: true, parseOnLoad:true" ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/mespeak/mespeak.js"></script>
    <script type="text/javascript">
        require(["dojo/parser", "dijit/layout/ContentPane", "dijit/layout/BorderContainer"]);
        require(["dojo/_base/fx", "dojo/dom-style", "dojo/dom", "dojo/domReady!"],
            function (fx, domStyle, dom) {
                setTimeout(function () {
                    fx.fadeOut({
                        node: dom.byId("loadingOverlay"),
                        duration: 1000,
                        onEnd: function(node){
                            domStyle.set(node, 'display', 'none');
                        }
                    }).play();
                }, 500);
        });
        require(["js/Interviewer", "js/ChatBox", "js/Timer"],
            function (Interviewer, ChatBox, Timer) {
            var chat = new ChatBox({
                id: "chat-area"
            });
            var timer = new Timer({
                id: "timer-area"
            });
            var interviewer = new Interviewer({
                textBox: chat,
                timer: timer
            });
            meSpeak.speak(document.querySelector('#question-prompt').innerHTML);
        });
        require(["js/Editor", "dojo/domReady!"], function (Editor) {
            var editor = new Editor({
                editor: "editor"
            });
            editor.setTheme("ace/theme/clouds");
            editor.session.setMode("ace/mode/javascript");
            // Charlie's sick jquery code fuck this dojo bozo 
            $("#syntaxhelp").change(function(){
                editor.getSession().setUseWorker($(this).prop("checked"));
            });
            $("#langoptions").change(function(){
                editor.session.setMode("ace/mode/" + $(this).val());
            })
            document.getElementById('editor').style.fontSize='14px';
            document.getElementById('editor').style.fontFamily='Roboto Mono';
        });
    </script>
</head>
<body class="claro">
    <div class="pageOverlay">
        <div id="loadingOverlay">
            <div class="loadingMessage">Loading....</div>
        </div>
    </div>
    <div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'sidebar', gutters:true, liveSplitters:true" id="borderContainer" style="height:100%; width=100%;">
        <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
            <div id="question-prompt">{{question}}</div>
        </div>
        <div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="splitter:true, region:'right'" style="width: 300px;">
            <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
                <div id="time-display">
                    Time Remaining: <span id='timer-area'></span><button id='start-timer'>Pause</button>
                </div>
            </div>
            <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="splitter:true, region:'center'">
                <div id="chat-area"></div>
            </div>
            <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'bottom'">
                <button id="user-input-button">Submit Code</button>
            </div>
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="splitter:true, region:'center'">
            <div id="editor" style='width: 100%; height: 500px;'>
// Write fizz_buzz
function fizz_buzz(items) {
    for (i = 0; i &lt; items.length; i++) {
        if (i % 3  == 0) {
            alert("plz help");
        }
    }
}
            </div>

            <div>Language:
                <select id='langoptions'>
                    <option value='javascript'>Javascript</option>
                    <option default value='python'>Python</option>
                    <option value='c++'>C++</option>
                    <option value='c'>C</option>
                    <option value='ruby'>Ruby</option>
                    <option value='java'>Java</option>
                </select>
                | Show syntax mistakes? <input id='syntaxhelp' type='checkbox'>


            </div>
        </div>
</div>
<!-- ignore these -->
<select id='audioSource' style="display:none;"></select>
<audio></audio>
  <script type="text/javascript">
    meSpeak.loadConfig("js/mespeak/mespeak_config.json");
    meSpeak.loadVoice("js/mespeak/voices/en/en-us.json");
  </script>
<script src='js/media.js'></script>

</body>
</html>
