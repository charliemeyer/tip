<!DOCTYPE html>
<html>
<head>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css">
    <script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <title>Interview Simulation</title>
    <script type="text/javascript">
    var dojoConfig = {
        baseUrl: "./",
        tlmSiblingOfDojo: false
    };
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"
            data-dojo-config="async: true, parseOnLoad:true" ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/mespeak/mespeak.js"></script>
    <script type="text/javascript">
        // This line parses the HTML interface
        require(["dojo/parser", "dijit/layout/ContentPane", "dijit/layout/BorderContainer"]);
        // This takes care of fading out the loading screen.
        require(["dojo/_base/fx", "dojo/dom-style", "dojo/dom", "dojo/domReady!"],
            function (fx, domStyle, dom) {
                setTimeout(function () {
                    fx.fadeOut({
                        node: dom.byId("loadingOverlay"),
                        duration: 1000,
                        onEnd: function(node){
                            domStyle.set(node, 'display', 'none');
                        }
                    }).play();
                }, 500);
        });
        // Starts the app
        require(["js/Interviewer", "js/ChatBox", "js/Timer", "js/Editor", "dojo/domReady!"],
            function (Interviewer, ChatBox, Timer, Editor) {
            require(["js/media"], function (media) {
                media.load();
            });
            editor = new Editor({
                editor: "editor"
            });
            var chat = new ChatBox({
                id: "chat-area"
            });
            var timer = new Timer({
                minutes: {{duration}},
                id: "timer-area"
            });
            var interviewer = new Interviewer({
                textBox: chat,
                timer: timer,
                editor: editor
            });
            // Charlie's sick jquery code fuck this dojo bozo
            $("#syntaxhelp").change(function(){
                editor.getSession().setUseWorker($(this).prop("checked"));
            });
            $("#langoptions").change(function(){
                editor.session.setMode("ace/mode/" + $(this).val());
            });
            interviewer.beginInterview();
        });
    </script>
</head>
<body class="claro">
    <div class="pageOverlay">
        <div id="loadingOverlay">
            <div class="loadingMessage">Loading....</div>
        </div>
    </div>
    <div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'sidebar', gutters:true, liveSplitters:true" id="borderContainer" style="height:100%; width=100%;">
        <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
            <div id="question-prompt"></div>
        </div>
        <div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="splitter:true, region:'right'" style="width: 300px;">
            <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
                <div id="time-display">
                    Time Remaining: <span id='timer-area'></span>
                </div>
            </div>
            <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="splitter:true, region:'center'">
                <div id="chat-area"></div>
            </div>
            <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'bottom'">
                <button id="user-input-button">Submit Code</button>
            </div>
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="splitter:true, region:'center'">
            <div id="editor" style='width: 100%; height: 500px;'></div>
            <pre id="results" style='font-size:14px'>
            </pre>

            <div>Language:
                <select id='langoptions'>
                    <option value='javascript'>javascript</option>
                    <option default value='python'>python</option>
                    <option value='c++'>c++</option>
                    <option value='c'>c</option>
                    <option value='ruby'>ruby</option>
                    <option value='java'>java</option>
                </select>
                | Show syntax mistakes? <input id='syntaxhelp' type='checkbox'>


            </div>
        </div>
</div>
<!-- ignore these -->
<select id='audioSource' style="display:none;"></select>
<audio></audio>
  <script type="text/javascript">
    meSpeak.loadConfig("js/mespeak/mespeak_config.json");
    meSpeak.loadVoice("js/mespeak/voices/en/en-us.json");
  </script>
</body>
</html>
